<?php
/**
 * Mageplaza
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Mageplaza.com license that is
 * available through the world-wide-web at this URL:
 * https://www.mageplaza.com/LICENSE.txt
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Mageplaza
 * @package     Mageplaza_BetterPopup
 * @copyright   Copyright (c) Mageplaza (http://www.mageplaza.com/)
 * @license     https://www.mageplaza.com/LICENSE.txt
 */
?>

<?php if($block->checkPagesToShow()): ?>
    <?php
        $floatLocation = ($block->getLocationFloatButton() == Mageplaza\BetterPopup\Model\Config\Source\ButtonDirection::FLOAT_LEFT) ? 'left: 70px' : 'right:70px';
    ?>

<div id="mageplaza-betterpopup-block" class="mageplaza-betterpopup-block" data-mage-init='{"mpPopup": { "dataPopup": <?php echo $block->getAjaxData(); ?>}}'>
    <div id="bio_ep" style="background-color: <?php echo $block->getBackGroundColor(); ?>; display:none">
        <div class="mageplaza-betterpopup-content">
            <div id="bio_ep_close">X</div>
            <div id="bio_ep_content" class="better-popup-content" style="color: <?php echo $block->getTextColor(); ?>">
                <?php if($block->getPopupContent()): ?>
                    <?php echo $block->getPopupContent(); ?>
                <?php else: ?>
                    <span class="lable-hold-on"><?php echo __('HOLD ON!'); ?></span>
                    <span>Get <b>10%</b> off immediately</span>
                    <form class="form subscribe"
                          novalidate
                          action="<?php echo $block->getFormActionUrl() ?>"
                          method="post"
                          data-mage-init='{"validation": {"errorClass": "mage-error"}}'
                          id="mp-newsletter-validate-detail">
                        <div class="field newsletter">
                            <div class="control">
                                <input name="email" type="email" id="mp-newsletter" class="better-popup-input-email"
                                       placeholder="<?php echo __('Enter your email address'); ?>"
                                       data-validate="{required:true, 'validate-email':true}"/>
                            </div>
                        </div>
                        <div class="actions">
                            <button class="action subscribe primary better-popup-btn-submit" title="<?php echo __('Send me my coupon') ?>" type="submit">
                                <span class="success-lable"><?php echo __('Send me my coupon'); ?></span>
                            </button>
                        </div>
                    </form>
                    <div id="status"></div>
                <?php endif; ?>
            </div>
        </div>
        <div id="mp-powered">
            <span class="lable-powered">Powered by Mageplaza</span>
        </div>
    </div>
    <?php if($block->isShowFloatButton()): ?>
        <div id="mp-better-popup-click-trigger" style="<?php echo $floatLocation; ?>">
            <button class="click-trigger primary"><?php echo __('Show Popup'); ?></button>
        </div>
        <?php endif; ?>
</div>
<?php endif; ?>


